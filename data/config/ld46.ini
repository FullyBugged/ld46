; ld46 - Template basic config file

@save.dat@

[Display]
; FullScreen = false + Decoration = false + no dimension -> Borderless FullScreen
Title           = ld46
FullScreen      = true
Decoration      = false
Smoothing       = false
VSync           = true

[Resource]
Texture         = game.dat # ../data/texture # ../data/font
Sound           = game.dat # ../data/sound

[Physics]
DimensionRatio  = 0.01
Gravity         = (0, 0)

[Config]
DefaultParent   = Default

[Default]
SlotList        = @
PartList        = @
KeepInCache     = true

[Input]
DefaultThreshold= 0.2
SetList         = MainInput

[MainInput]
KEY_ESCAPE      = Quit

KEY_BACKSPACE   = Reset
JOY_RTHUMB_1    = Reset
JOY_RTHUMB_2    = Reset
JOY_RTHUMB_3    = Reset
JOY_RTHUMB_4    = Reset

KEY_P           = Pause
KEY_SPACE       = Pause # Restart
JOY_START_1     = Pause # Restart
JOY_START_2     = Pause # Restart
JOY_START_3     = Pause # Restart
JOY_START_4     = Pause # Restart

KEY_F1          = Menu
KEY_ENTER       = Menu
JOY_BACK_1      = Menu
JOY_BACK_2      = Menu
JOY_BACK_3      = Menu
JOY_BACK_4      = Menu

KEY_1           = 1P
KEY_2           = 2P
KEY_3           = 3P
KEY_4           = 4P
JOY_A_1         = 1P # Restart
JOY_A_2         = 2P # Restart
JOY_A_3         = 3P # Restart
JOY_A_4         = 4P # Restart

[Game]
Scale           = 6
HardDoorSkip    = 6 ~ 8
ViewportList    = CompositingViewport
LampCapacity    = 130
LampBurnRate    = 5 # 8 # 10 # 12 # 14 # 15 # 16 # 17 # 18 # 19 # 20 # 21 # 22 # 23 # 24 # 25 # 26 # 27 # 28 # 29 # 30
LampRefill      = 50
PlayerSpeed     = 70
PlayerDashSpeed = 200
PlayerMoveThreshold = 10
1P              = Player1
2P              = Player1 # Player2
3P              = Player1 # Player2 # Player3
4P              = Player1 # Player2 # Player3 # Player4

[Runtime]
Mode            = @Game.1P

[CompositingViewport]
ShaderList      = @
BackgroundColor = (120, 120, 120)
BackgroundAlpha = 0
BlendMode       = none
FixedRatio      = % > Get MainCamera FrustumHeight, > Get MainCamera FrustumWidth, / < <
ParamList       = Back
Code            = "
void main()
{
    gl_FragColor = vec4(texture2D(Back, gl_TexCoord[0].xy).rgb, 1.0);
}
"
Back            = BackTexture
NoDebug         = true

[MainViewport]
Camera          = MainCamera
BackgroundColor = (0, 0, 0)
BackgroundAlpha = 0
Size            = % > Get MainCamera FrustumHeight, > Get MainCamera FrustumWidth, return (<, <)
TextureList     = BackTexture
NoDebug         = true

[MainCamera]
GroupList       = Background # Train # Game # Player # Doorframe # Front # Lamp # UI
FrustumWidth    = 1920
FrustumHeight   = 1080
FrustumFar      = 2
FrustumNear     = 0
Position        = (0, 0, -1)

[Menu]
Pausable        = false
Group           = UI
ID              = Menu
Pausable        = false
Graphic         = @
TrackList       = SetID # MusicTrack
Pivot           = center truncate
Scale           = 4
Graphic         = @
Text            = @
String          = [1]PLAYER, [2]PLAYERS, [3]PLAYERS, [4]PLAYERS?
ChildList       = 1P # 2P # 3P # 4P

[MusicTrack]
0               = > Get Runtime Music, > == 0 <, EvalIf < "Object.Create Music"

[MenuButton]
Pausable        = false
TrackList       = ButtonTrack

[ButtonTrack]
0               = >> Object.GetName ^, > Input.IsActive <, EvalIf < "Set Runtime Mode @Game.<, Input.SetValue Reset 1"
Loop            = true

[1P@MenuButton]

[2P@MenuButton]

[3P@MenuButton]

[4P@MenuButton]

[Scene@Object]
ID              = Scene
TrackList       = SetID
ChildList       = Players # Background # Trains

[GameOver@Object]
Group           = UI
ID              = GameOver
Pausable        = false
TrackList       = SetID # Restart
Pivot           = bottom truncate
Scale           = 8
Graphic         = @
Text            = @
String          = GAME OVER
ChildList       = GameOverSubtitle # GameOverVeil

[Restart]
0.8             = Object.AddTrack ^ RestartLoop

[RestartLoop]
0               = > Input.IsActive Restart, EvalIf < "Input.SetValue Reset 1, Object.Delete ^"
Loop            = true

[GameOverVeil]
ParentCamera    = MainCamera
Position        = (0, 0.1, 1)
Scale           = (1, 0.9)
Pivot           = center
Graphic         = @
Texture         = pixel
Color           = (0, 0, 0)
Alpha           = 0.5

[GameOverSubtitle]
Pivot           = top truncate
Position        = (0, 100)
Scale           = 4
Graphic         = @
Text            = @
IgnoreFromParent= scale position.scale
String          = SPACE|A TO RESTART / BACK|ENTER FOR PLAYER(S) SELECTION

[Background]
Group           = Background
Age             = 40
ParentCamera    = MainCamera
Scale           = 1
Position        = (0, 0, 1)
Pivot           = center
RGB             = (.6,1,.7)
Graphic         = @
Texture         = pixel
ChildList       = DeathWallLeft # LimitWallRight # DeathWallTop # DeathWallBottom # FlowerSpawner1 # Foreground

[DeathWall]
Body            = @
Type            = box
SelfFlags       = Death
CheckMask       = Player
UseParentSpace  = both
Size            = % >> Get MainCamera FrustumWidth, return (<, <)

[LimitWall@DeathWall]
SelfFlags       = Obstacle
Solid           = true

[DeathWallLeft@DeathWall]
Pivot           = right
Position        = (-0.55, 0)

[LimitWallRight@LimitWall]
Pivot           = left
Position        = (0.5, 0)

[DeathWallTop@DeathWall]
Pivot           = bottom
Position        = (0, -0.31)

[DeathWallBottom@DeathWall]
Pivot           = top
Position        = (0, 0.44)

[SetID]
0               = > Object.GetName ^, > Get < ID, Set Runtime < ^

@object.ini@
@player.ini@
@commondev.ini@
@Futura.ini@
