[Object]
Group           = Game
IgnoreFromParent= scale

[Lamp@Object]
Graphic         = @
Texture         = pixel
Pivot           = center
RGB             = (0.45, 0.45, 0.45)
Position        = (0, 0, -1)
Scale           = @Game.LampRadius
FXList          = Wiggle # Fade
BlendMode       = add
ShaderList      = @
Code            = "
void main()
{
    float Value = 0.5 - smoothstep(0.2, 0.4, distance(gl_TexCoord[0].xy, vec2(0.5)));
    gl_FragColor = vec4(Value);
}
"

[Obstacle@Object]
Body            = @
PartList        = @
Graphic         = @
AllowMoving     = true
Type            = box
Solid           = true
SelfFlags       = Obstacle
CheckMask       = Player

[Box@Obstacle]
Texture         = box.png
TopLeft         = (1,0)
BottomRight     = (7,8)

[Train@Object]
Group           = Train
Graphic         = @
Body            = @
AllowMoving     = true

[Chair_Horizontal_Top@Obstacle]
Texture         = chair_horizontal_top.png
TopLeft         = (2,0)
BottomRight     = (17,10)

[Chair_Vertical_Bottom_Right@Obstacle]
Texture         = chair_vertical_bottom_right.png
TopLeft         = (3,2)
BottomRight     = (10,13)

[Chair_Vertical_Bottom_Left@Obstacle]
Texture         = chair_vertical_bottom_left.png
TopLeft         = (2,2)
BottomRight     = (9,13)

[Train01@Train]
LeftDoor        = true
RightDoor       = true
Texture         = train_01.png
PartList        = Train01_Door1 # Train01_Door2 # Train01_Door3 # Train01_Door4 # Train01_Wall1 # Train01_Wall2 # Train01_Wall3 # Train01_Wall4 # Train01_Wall5 # Train01_Wall6 # Train01_Wall7 # Train01_Wall8
ChildList       = Box1 # Box2 # Box3 # Chair1 # Chair2 # Chair3 # Chair4

[Train02@Train]
LeftDoor        = true
RightDoor       = true
Texture         = train_02.png
PartList        = Train02_Door1 # Train02_Door2 # Train01_Door3 # Train01_Door4 # Train02_Wall1 # Train02_Wall2 # Train02_Wall3 # Train02_Wall4 # Train01_Wall3 # Train01_Wall4 # Train01_Wall7 # Train01_Wall8
ChildList       = Box4 # Box5 # Chair2

[DoorPart]
Type            = box
SelfFlags       = Door
CheckMask       = Player

[WallPart]
Type            = box
SelfFlags       = Obstacle
CheckMask       = Player
Solid           = true

[Train01_Door1@DoorPart]
TopLeft         = (14,0)
BottomRight     = (35,15)

[Train01_Door2@DoorPart]
TopLeft         = (61,35)
BottomRight     = (82,50)

[Train01_Door3@DoorPart]
TopLeft         = (0,18)
BottomRight     = (8,35)

[Train01_Door4@DoorPart]
TopLeft         = (122,18)
BottomRight     = (130,35)

[Train02_Door1@DoorPart]
TopLeft         = (55,0)
BottomRight     = (76,15)

[Train02_Door2@DoorPart]
TopLeft         = (55,35)
BottomRight     = (76,50)

[Train01_Wall1@WallPart]
TopLeft         = (0,0)
BottomRight     = (14,11)

[Train01_Wall2@WallPart]
TopLeft         = (35,0)
BottomRight     = (130,11)

[Train01_Wall3@WallPart]
TopLeft         = (129,0)
BottomRight     = (130,18)

[Train01_Wall4@WallPart]
TopLeft         = (129,35)
BottomRight     = (130,50)

[Train01_Wall5@WallPart]
TopLeft         = (0,45)
BottomRight     = (61,50)

[Train01_Wall6@WallPart]
TopLeft         = (82,45)
BottomRight     = (130,50)

[Train01_Wall7@WallPart]
TopLeft         = (0,35)
BottomRight     = (1,50)

[Train01_Wall8@WallPart]
TopLeft         = (0,0)
BottomRight     = (1,18)

[Train02_Wall1@WallPart]
TopLeft         = (0,0)
BottomRight     = (55,11)

[Train02_Wall2@WallPart]
TopLeft         = (76,0)
BottomRight     = (130,11)

[Train02_Wall3@WallPart]
TopLeft         = (0,45)
BottomRight     = (55,50)

[Train02_Wall4@WallPart]
TopLeft         = (76,45)
BottomRight     = (130,50)

[Box1@Box]
Position        = (45,11)

[Box2@Box]
Position = (19,36)

[Box3@Box]
Position = (30,36)

[Box4@Box]
Position = (30,22)

[Box5@Box]
Position = (40,22)

[Box6@Box]
Position = (50,22)

[Chair1@Chair_Horizontal_Top]
Position        = (59,9)

[Chair2@Chair_Horizontal_Top]
Position        = (90,9)

[Chair3@Chair_Vertical_Bottom_Right]
Position        = (90,32)

[Chair4@Chair_Vertical_Bottom_Left]
Position        = (105,32)

[Wiggle]
SlotList        = @
Type            = scale
Curve           = triangle
StartValue      = 1
EndValue        = 0.96 # 0.98
StartTime       = 0
EndTime         = 0.1 ~ 0.15
Loop            = true
DoNotCache      = true

[Fade]
SlotList        = @
Type            = scale
Curve           = linear
StartValue      = 1
EndValue        = 0.01
StartTime       = 0
EndTime         = @Game.LampDuration
Loop            = true
