[Object]
Group           = Game
IgnoreFromParent= scale

[Lamp@Object]
Graphic         = @
Texture         = pixel
Pivot           = center
RGB             = (0.45, 0.45, 0.45)
Position        = (0, 0, -1)
Scale           = @Game.LampRadius
FXList          = Wiggle # Fade
BlendMode       = add
ShaderList      = @
Code            = "
void main()
{
    float Value = 0.5 - smoothstep(0.2, 0.4, distance(gl_TexCoord[0].xy, vec2(0.5)));
    gl_FragColor = vec4(Value);
}
"

[Box@Object]
Body = @
PartList = BoxPart
AllowMoving = true
Graphic = @
Texture = box.png

[BoxPart]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (1,0)
BottomRight = (7,8)

[Train@Object]
Group = Train

[Chair_Horizontal_Top@Object]
Graphic = @
Texture = chair_horizontal_top.png
Body = @
PartList = ChairHTPart
AllowMoving = true

[ChairHTPart]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (2,0)
BottomRight = (17,10)

[Chair_Vertical_Bottom_Right@Object]
Graphic = @
Texture = chair_vertical_bottom_right.png
Body = @
PartList = ChairVBRPart
AllowMoving = true

[ChairVBRPart]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (3,0)
BottomRight = (10,13)

[Chair_Vertical_Bottom_Left@Object]
Graphic = @
Texture = chair_vertical_bottom_left.png
Body = @
PartList = ChairVBLPart
AllowMoving = true

[ChairVBLPart]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (2,0)
BottomRight = (9,13)

[Train01@Train]
ChildList = Box1 # Box2 # Box3 # Chair1 # Chair2 # Chair3 # Chair4
Graphic = @
Texture = train_01.png
Body = @
PartList = Train01_Door1 # Train01_Door2 # Train01_Door3 # Train01_Door4 # Train01_Wall1 # Train01_Wall2 # Train01_Wall3 # Train01_Wall4 # Train01_Wall5 # Train01_Wall6 # Train01_Wall7 # Train01_Wall8

[Train01_Door1]
Type = box
SelfFlags = Door
CheckMask = Player
TopLeft = (14,4)
BottomRight = (35,15)

[Train01_Door2]
Type = box
SelfFlags = Door
CheckMask = Player
TopLeft = (61,35)
BottomRight = (82,45)

[Train01_Door3]
Type = box
SelfFlags = Door
CheckMask = Player
TopLeft = (0,18)
BottomRight = (8,35)

[Train01_Door4]
Type = box
SelfFlags = Door
CheckMask = Player
TopLeft = (122,18)
BottomRight = (130,35)

[Train01_Wall1]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (0,0)
BottomRight = (14,11)

[Train01_Wall2]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (35,0)
BottomRight = (130,11)

[Train01_Wall3]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (129,0)
BottomRight = (130,18)

[Train01_Wall4]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (129,35)
BottomRight = (130,50)

[Train01_Wall5]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (0,45)
BottomRight = (61,50)

[Train01_Wall6]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (82,45)
BottomRight = (130,50)

[Train01_Wall7]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (0,35)
BottomRight = (1,50)

[Train01_Wall8]
Type = box
SelfFlags = Obstacle
CheckMask = Player
Solid = true
TopLeft = (0,0)
BottomRight = (1,18)

[Box1@Box]
Position = (45,11)

[Box2@Box]
Position = (19,37)

[Box3@Box]
Position = (30,37)

[Chair1@Chair_Horizontal_Top]
Position = (59,9)

[Chair2@Chair_Horizontal_Top]
Position = (90,9)

[Chair3@Chair_Vertical_Bottom_Right]
Position = (90,32)

[Chair4@Chair_Vertical_Bottom_Left]
Position = (105,32)

[Wiggle]
SlotList        = @
Type            = scale
Curve           = triangle
StartValue      = 1
EndValue        = 0.96 # 0.98
StartTime       = 0
EndTime         = 0.1 ~ 0.15
Loop            = true
DoNotCache      = true

[Fade]
SlotList        = @
Type            = scale
Curve           = linear
StartValue      = 1
EndValue        = 0.01
StartTime       = 0
EndTime         = @Game.LampDuration
Loop            = true
