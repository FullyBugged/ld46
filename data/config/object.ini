[Object]
Group           = Game

; === Lamp ===

[Lamp@Object]
Graphic         = @
Texture         = pixel
Pivot           = center
RGB             = (0.45, 0.45, 0.45)
Position        = (0, 0, -1)
Scale           = @Game.LampRadius
FXList          = Wiggle # Fade
BlendMode       = add
ShaderList      = @
Code            = "
void main()
{
    float Value = 0.5 - smoothstep(0.2, 0.4, distance(gl_TexCoord[0].xy, vec2(0.5)));
    gl_FragColor = vec4(Value);
}
"

[Wiggle]
Type            = scale
Curve           = triangle
StartValue      = 1
EndValue        = 0.96 # 0.98
StartTime       = 0
EndTime         = 0.1 ~ 0.15
Loop            = true
DoNotCache      = true

[Fade]
Type            = scale
Curve           = linear
StartValue      = 1
EndValue        = 0.01
StartTime       = 0
EndTime         = @Game.LampDuration
Loop            = true

; === Oil ===
[Oil@Object]
Graphic         = @
Texture         = Oil.png
Body            = @
Scale           = 0.8
PartList        = @
AllowMoving     = true
Type            = box
SelfFlags       = Oil
CheckMask       = Player
Flip            = none # x # y # both
Pivot           = center truncate
PickUp          = PickUpOil

[PickUpOil]
Immediate       = true
0               = >> Get Game LampRefill #
                   > Get Runtime Collider # > Object.GetChild < # > Object.GetScale < #
                   > + < (<, <) # > Get Game LampRadius # > min < < #
                   > Get Runtime Collider # > Object.GetChild < # Object.SetScale < < #
                     Object.Delete ^

[Oil1@Oil]
Position        = (7, 4, 0.1)

[Oil2@Oil]
Position        = (10, 10, 0.1)

; === Train ===

[Trains]
Position        = (960, -100)
ChildList       = TrainLane1 # TrainLane2 # TrainLane3
Age             = 35
Scale           = 6

[TrainLane@Object]
Pivot           = top left

[TrainSpawner]
Object          = Train01 # Train02 # Train03 # Train04 # Train05
WaveSize        = 1
CleanOnDelete   = true
Interpolate     = true

[TrainLane1@TrainLane]
Position        = (0, -50, 0.1)
Spawner         = TrainSpawner1

[TrainSpawner1@TrainSpawner]
ObjectSpeed     = (-78, 0)
WaveDelay       = 9.99

[TrainLane2@TrainLane]
Position        = (0, 0)
Pivot           = left truncate
Spawner         = TrainSpawner2

[TrainSpawner2@TrainSpawner]
ObjectSpeed     = (-156, 0)
WaveDelay       = 4.99

[TrainLane3@TrainLane]
Position        = (0, 50, -0.1)
Pivot           = left truncate
Spawner         = TrainSpawner3

[TrainSpawner3@TrainSpawner]
ObjectSpeed     = (-306, 0)
WaveDelay       = 2.49

[Obstacle@Object]
Body            = @
HighSpeed       = true
Graphic         = @
AllowMoving     = true
Type            = box
Solid           = true
SelfFlags       = Obstacle
CheckMask       = Player

[Box@Obstacle]
Texture         = box.png
TopLeft         = (1,0)
BottomRight     = (7,8)

[Train@Object]
Group           = Train
Graphic         = @
LifeTime        = 40

[TrainHull@Object]
Body            = @
AllowMoving     = true

[Chair_Horizontal_Top@Obstacle]
Texture         = chair_horizontal_top.png
TopLeft         = (2,0)
BottomRight     = (17,10)

[Chair_Vertical_Bottom_Right@Obstacle]
Texture         = chair_vertical_bottom_right.png
TopLeft         = (3,2)
BottomRight     = (10,13)

[Chair_Vertical_Bottom_Left@Obstacle]
Texture         = chair_vertical_bottom_left.png
TopLeft         = (2,2)
BottomRight     = (9,13)

[Train01@Train]
LeftDoor        = true
RightDoor       = true
Texture         = train_01.png
ChildList       = TrainHull1 # Box1 # Box2 # Box3 # Chair1 # Chair2 # Chair3 # Chair4

[TrainHull1@TrainHull]
PartList        = Train01_Door1 # Train01_Door2 # Train01_Door3 # Train01_Door4 # Train01_Wall1 # Train01_Wall2 # Train01_Wall3 # Train01_Wall4 # Train01_Wall5 # Train01_Wall6 # Train01_Wall7 # Train01_Wall8

[Train02@Train]
LeftDoor        = true
RightDoor       = true
Texture         = train_02.png
ChildList       = TrainHull2 # Box4 # Box5 # Chair2

[TrainHull2@TrainHull]
PartList        = Train02_Door1 # Train02_Door2 # Train01_Door3 # Train01_Door4 # Train02_Wall1 # Train02_Wall2 # Train02_Wall3 # Train02_Wall4 # Train01_Wall3 # Train01_Wall4 # Train01_Wall7 # Train01_Wall8

[Train03@Train]
LeftDoor        = true
RightDoor       = false
Texture         = train_03.png
ChildList       = TrainHull3

[TrainHull3@TrainHull]
PartList        = Train03_Door1 # Train03_Door2 # Train03_Door3 # Train01_Door3 # Train01_Wall7 # Train01_Wall8 # Train03_Wall1 # Train03_Wall2 # Train03_Wall3 # Train03_Wall4 # Train03_Wall5 # Train03_Wall6

[Train04@Train]
LeftDoor        = false
RightDoor       = true
Texture         = train_04.png
ChildList       = TrainHull4

[TrainHull4@TrainHull]
PartList        = Train04_Door1 # Train04_Door2 # Train04_Door3 # Train01_Door4 # Train01_Wall3 # Train01_Wall4 # Train04_Wall1 # Train04_Wall2 # Train04_Wall3 # Train04_Wall4 # Train04_Wall5 # Train04_Wall6

[Train05@Train]
LeftDoor        = true
RightDoor       = true
Texture         = train_05.png
ChildList       = TrainHull5

[TrainHull5@TrainHull]
PartList        = Train05_Door1 # Train05_Door2 # Train05_Door3 # Train05_Door4 # 
                  Train01_Door3 # Train01_Door4 # Train01_Wall3 # Train01_Wall4 # Train01_Wall7 # Train01_Wall8 # 
				  Train05_Wall1 # Train05_Wall2 # Train05_Wall3 # Train05_Wall4 # Train05_Wall5 # Train05_Wall6

[DoorPart]
Type            = box
SelfFlags       = Door
CheckMask       = Player

[WallPart]
Type            = box
SelfFlags       = Obstacle
CheckMask       = Player
Solid           = true

[Train01_Door1@DoorPart]
TopLeft         = (14,0)
BottomRight     = (35,15)

[Train01_Door2@DoorPart]
TopLeft         = (61,35)
BottomRight     = (82,50)

[Train01_Door3@DoorPart]
TopLeft         = (0,18)
BottomRight     = (8,35)

[Train01_Door4@DoorPart]
TopLeft         = (122,18)
BottomRight     = (130,35)

[Train02_Door1@DoorPart]
TopLeft         = (55,0)
BottomRight     = (76,15)

[Train02_Door2@DoorPart]
TopLeft         = (55,35)
BottomRight     = (76,50)

[Train03_Door1@DoorPart]
TopLeft         = (14,0)
BottomRight     = (35,15)

[Train03_Door2@DoorPart]
TopLeft         = (92,0)
BottomRight     = (113,15)

[Train03_Door3@DoorPart]
TopLeft         = (72,35)
BottomRight     = (93,50)

[Train04_Door1@DoorPart]
TopLeft         = (55,0)
BottomRight     = (76,15)

[Train04_Door2@DoorPart]
TopLeft         = (29,35)
BottomRight     = (50,50)

[Train04_Door3@DoorPart]
TopLeft         = (94,35)
BottomRight     = (115,50)

[Train05_Door1@DoorPart]
TopLeft         = (24,0)
BottomRight     = (45,15)

[Train05_Door2@DoorPart]
TopLeft         = (85,0)
BottomRight     = (106,15)

[Train05_Door3@DoorPart]
TopLeft         = (29,35)
BottomRight     = (50,50)

[Train05_Door4@DoorPart]
TopLeft         = (94,35)
BottomRight     = (115,50)

[Train01_Wall1@WallPart]
TopLeft         = (0,0)
BottomRight     = (14,11)

[Train01_Wall2@WallPart]
TopLeft         = (35,0)
BottomRight     = (130,11)

[Train01_Wall3@WallPart]
Type            = edge
VertexList      = (130,0) # (130,18)

[Train01_Wall4@WallPart]
Type            = edge
VertexList      = (130,35) # (130,50)

[Train01_Wall5@WallPart]
TopLeft         = (0,45)
BottomRight     = (61,50)

[Train01_Wall6@WallPart]
TopLeft         = (82,45)
BottomRight     = (130,50)

[Train01_Wall7@WallPart]
Type            = edge
VertexList      = (1,35) # (1,50)

[Train01_Wall8@WallPart]
Type            = edge
VertexList      = (1,0) # (1,18)

[Train02_Wall1@WallPart]
TopLeft         = (0,0)
BottomRight     = (55,11)

[Train02_Wall2@WallPart]
TopLeft         = (76,0)
BottomRight     = (130,11)

[Train02_Wall3@WallPart]
TopLeft         = (0,45)
BottomRight     = (55,50)

[Train02_Wall4@WallPart]
TopLeft         = (76,45)
BottomRight     = (130,50)

[Train03_Wall1@WallPart]
Type            = edge
VertexList      = (129,0) # (129,50)

[Train03_Wall2@WallPart]
TopLeft         = (0,0)
BottomRight     = (14,11)

[Train03_Wall3@WallPart]
TopLeft         = (35,0)
BottomRight     = (92,11)

[Train03_Wall4@WallPart]
TopLeft         = (113,0)
BottomRight     = (130,11)

[Train03_Wall5@WallPart]
TopLeft         = (0,45)
BottomRight     = (72,50)

[Train03_Wall6@WallPart]
TopLeft         = (93,45)
BottomRight     = (130,50)

[Train04_Wall1@WallPart]
Type            = edge
VertexList      = (1,0) # (1,50)

[Train04_Wall2@WallPart]
TopLeft         = (0,0)
BottomRight     = (55,11)

[Train04_Wall3@WallPart]
TopLeft         = (76,0)
BottomRight     = (130,11)

[Train04_Wall4@WallPart]
TopLeft         = (0,45)
BottomRight     = (29,50)

[Train04_Wall5@WallPart]
TopLeft         = (50,45)
BottomRight     = (94,50)

[Train04_Wall6@WallPart]
TopLeft         = (115,45)
BottomRight     = (130,50)

[Train05_Wall1@WallPart]
TopLeft         = (0,0)
BottomRight     = (24,11)

[Train05_Wall2@WallPart]
TopLeft         = (45,0)
BottomRight     = (85,11)

[Train05_Wall3@WallPart]
TopLeft         = (106,0)
BottomRight     = (130,11)

[Train05_Wall4@WallPart]
TopLeft         = (0,45)
BottomRight     = (29,50)

[Train05_Wall5@WallPart]
TopLeft         = (50,45)
BottomRight     = (94,50)

[Train05_Wall6@WallPart]
TopLeft         = (115,45)
BottomRight     = (130,50)

[Box1@Box]
Position        = (45,11)
ChildList       = Oil1

[Box2@Box]
Position        = (19,36)

[Box3@Box]
Position        = (30,36)

[Box4@Box]
Position = (30,22)

[Box5@Box]
Position = (40,22)
ChildList       = Oil1

[Box6@Box]
Position = (50,22)

[Chair1@Chair_Horizontal_Top]
Position        = (59,9)

[Chair2@Chair_Horizontal_Top]
Position        = (90,9)
ChildList       = Oil2

[Chair3@Chair_Vertical_Bottom_Right]
Position        = (90,32)

[Chair4@Chair_Vertical_Bottom_Left]
Position        = (105,32)
