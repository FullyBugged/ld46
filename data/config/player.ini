[Players]
ChildList       = @Runtime.Mode

[Input]
SetList         += Player1Input # Player2Input # PlayerInput3 # PlayerInput4

[Player1Input]
KEY_UP          = MoveUp
KEY_LEFT        = MoveLeft
KEY_DOWN        = MoveDown
KEY_RIGHT       = MoveRight
KEY_RSHIFT      = Dash

-JOY_LX_1       = MoveLeft
+JOY_LX_1       = MoveRight
-JOY_LY_1       = MoveUp
+JOY_LY_1       = MoveDown
JOY_LEFT_1      = MoveLeft
JOY_RIGHT_1     = MoveRight
JOY_UP_1        = MoveUp
JOY_DOWN_1      = MoveDown

JOY_A_1         = Dash
JOY_B_1         = Dash
JOY_X_1         = Dash
JOY_Y_1         = Dash

[Player2Input]
KEY_W           = MoveUp
KEY_A           = MoveLeft
KEY_S           = MoveDown
KEY_D           = MoveRight
KEY_LSHIFT      = Dash

-JOY_LX_2       = MoveLeft
+JOY_LX_2       = MoveRight
-JOY_LY_2       = MoveUp
+JOY_LY_2       = MoveDown
JOY_LEFT_2      = MoveLeft
JOY_RIGHT_2     = MoveRight
JOY_UP_2        = MoveUp
JOY_DOWN_2      = MoveDown

JOY_A_2         = Dash
JOY_B_2         = Dash
JOY_X_2         = Dash
JOY_Y_2         = Dash

[Player3Input]
-JOY_LX_3       = MoveLeft
+JOY_LX_3       = MoveRight
-JOY_LY_3       = MoveUp
+JOY_LY_3       = MoveDown
JOY_LEFT_3      = MoveLeft
JOY_RIGHT_3     = MoveRight
JOY_UP_3        = MoveUp
JOY_DOWN_3      = MoveDown

JOY_A_3         = Dash
JOY_B_3         = Dash
JOY_X_3         = Dash
JOY_Y_3         = Dash

[Player4Input]
-JOY_LX_4       = MoveLeft
+JOY_LX_4       = MoveRight
-JOY_LY_4       = MoveUp
+JOY_LY_4       = MoveDown
JOY_LEFT_4      = MoveLeft
JOY_RIGHT_4     = MoveRight
JOY_UP_4        = MoveUp
JOY_DOWN_4      = MoveDown

JOY_A_4         = Dash
JOY_B_4         = Dash
JOY_X_4         = Dash
JOY_Y_4         = Dash

[Player@Object]
Group           = Player
Graphic         = @
Pivot           = center truncate
ChildList       = Lamp
LampCapacity    = @Game
LampBurnRate    = @Game
Speed           = @Game.PlayerSpeed
DashSpeed       = @Game.PlayerDashSpeed
MoveThreshold   = @Game.PlayerMoveThreshold
DashDuration    = 0.15
Body            = @
PartList        = PlayerPart
Dynamic         = true
FixedRotation   = true
AnimationSet    = PlayerAnimationSet
IgnoreFromParent= scale position.scale
Scale           = 4
HighSpeed       = true
TrackList       = SetID # AddScore
Group           = Player

[AddScore]
0               = > Object.GetName ^, > Object.Create "<Score", Object.SetOwner < ^

[PlayerScore]
Group           = UI
ParentCamera    = MainCamera
UseParentSpace  = both
Graphic         = @
Text            = @
Font            = Futura
TrackList       = PlayerTrack
RGB             = (0,0,0)

[PlayerTrack]
0               = > Object.GetOwner ^, > Object.GetName <, > Get Runtime "<Score", > Object.GetOwner ^, > Object.GetName <, Object.SetText ^ "<: <"
Loop            = true

[Player1Score@PlayerScore]
Pivot           = top left
Position        = (-0.49, -0.48)

[Player2Score@PlayerScore]
Pivot           = top left
Position        = (-0.49, -0.41)

[Player3Score@PlayerScore]
Pivot           = top right
Position        = (0.49, -0.48)

[Player4Score@PlayerScore]
Pivot           = top right
Position        = (0.49, -0.41)

[PlayerPart]
Type            = box
SelfFlags       = Player
CheckMask       = Obstacle # Door # Oil # Death
Solid           = true
TopLeft         = (-2,-1)
BottomRight     = (3,5)

[CharacterAnimationSet]
Pivot           = center truncate
KeyDuration     = 0.05
StartAnim       = IdleRight
IdleRight       = 1
IdleLeft        = 1
Death           = 1
IdleRight->     = IdleRight # IdleLeft # .RunRight # .Death
IdleLeft->      = IdleLeft # IdleRight # .RunLeft
RunRight->      = RunRight # .+IdleRight
RunLeft->       = RunLeft # .+IdleLeft

[Death]
Direction       = left # down
Flip            = y

[Death1]
KeyEvent        = Object.SetColor ^ (80, 80, 80)

[IdleRight1]
KeyEvent        = Object.SetScale ^ (4, 4)

[IdleLeft1]
KeyEvent        = Object.SetScale ^ (-4, 4)

[RunRight1]
KeyEvent        = Object.SetScale ^ (4, 4) , Object.Create StepSound

[RunLeft1]
KeyEvent        = Object.SetScale ^ (-4, 4) , Object.Create StepSound

[PlayerAnimationSet@CharacterAnimationSet]
Texture         = Player.png
FrameSize       = (11,9)

[Player1@Player]
Input           = Player1Input
ID              = Player1

[Player2@Player]
Input           = Player2Input
ID              = Player2

[Player3@Player]
Input           = Player3Input
ID              = Player3

[Player4@Player]
Input           = Player4Input
ID              = Player4

[Sound]
SoundList = @
LifeTime = Sound
Bus = sfx

[HitSound@Sound]
Sound = hit.ogg

[DashSound@Sound]
Sound = dash.ogg
Volume = 0.7

[StepSound@Sound]
Sound = run.ogg
Pitch = 0.8 ~ 1.2

[DeathSound@Sound]
Sound = death.wav
